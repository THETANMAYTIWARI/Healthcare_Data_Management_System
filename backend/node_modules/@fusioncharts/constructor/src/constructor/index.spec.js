"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _core=_interopRequireDefault(require("../../../../packages/fusioncharts/core"));var _ignoreCaseExt=_interopRequireDefault(require("../../../../packages/fc-features/src/ignore-case-ext"));var _bar2d=_interopRequireDefault(require("../../../fusioncharts/viz/bar2d"));var _utitilies=require("../../../../dev-tests/viz/utitilies");var _is=_interopRequireDefault(require("ramda/src/is"));var _ignoreCaseExt2=_interopRequireDefault(require("../../../fc-features/src/ignore-case-ext"));var _gantt=_interopRequireDefault(require("../../../../packages/fusioncharts/viz/gantt"));var _multilevelpie=_interopRequireDefault(require("../../../fusioncharts/viz/multilevelpie"));var _index=_interopRequireDefault(require("../../../../packages/fusioncharts/datastore/index"));var _index2=_interopRequireDefault(require("@fusioncharts/datatable/src/aggregators/index"));var _timeseries=_interopRequireDefault(require("../../../fusioncharts/viz/timeseries"));_core.default.addDep(_bar2d.default);_core.default.addDep(_ignoreCaseExt.default);_core.default.addDep(_gantt.default);_core.default.addDep(_multilevelpie.default);_core.default.addDep(_ignoreCaseExt2.default);_core.default.addDep(_timeseries.default);describe("bar2d ",(function(){var chartObj,chartData={type:"bar2d",id:"id1",renderAt:_utitilies.CONTAINER_ID,width:"600",height:"350",dataFormat:"jsonUrl",dataSource:"https://static.fusioncharts.com/sample/oilReserves.json"};beforeEach((function(){chartObj=(0,_utitilies.setup)(_core.default,chartData).render()}));afterEach((function(){chartObj&&!chartObj.disposed&&chartObj.dispose()}));it("Charts should render when using JSONURL data format",(function(done){chartObj.addEventListener("renderComplete",(function(){var gotJsonData=false,dataSource=chartObj.options.dataSource,formatArg=chartObj.options.dataFormat;gotJsonData=formatArg==="json"&&(0,_is.default)(Object,dataSource);expect(gotJsonData).toBeTruthy();done()}));chartObj.render()}))}));describe("bar2d ",(function(){var chartObj,chartData={type:"bar2d",id:"id1",renderAt:_utitilies.CONTAINER_ID,width:"600",height:"350",dataFormat:"xmlUrl",dataSource:"https://static.fusioncharts.com/sample/oilReserves.xml"};beforeEach((function(){chartObj=(0,_utitilies.setup)(_core.default,chartData).render()}));afterEach((function(){chartObj&&!chartObj.disposed&&chartObj.dispose()}));it("Charts should render when using XMLURL data format",(function(done){chartObj.addEventListener("renderComplete",(function(){var gotXMLData=false,dataSource=chartObj.options.dataSource,formatArg=chartObj.options.dataFormat;gotXMLData=formatArg==="xml"&&(0,_is.default)(Object,dataSource);expect(gotXMLData).toBeTruthy();done()}));chartObj.render()}))}));describe("Gantt Chart width resize chart render",(function(){var chartObj,chartData={type:"gantt",width:"100%",height:"400",dataFormat:"json",renderAt:_utitilies.CONTAINER_ID,dataSource:{chart:{dateformat:"mm/dd/yyyy",caption:"Social Media Optimization",showFullDataTable:"0",captionFontSize:"16",subcaption:"Project Plan",theme:"fusion",ganttWidthPercent:"30"},datatable:{headervalign:"bottom",datacolumn:[{headertext:"Owner",headerfontsize:"14",headervalign:"bottom",headeralign:"left",align:"left",fontsize:"12",text:[{label:"John"},{label:"David"},{label:"Mary"},{label:"John"},{label:"Andrew & Harry"},{label:"John & Harry"},{label:"Neil & Harry"},{label:"Neil & Harry"},{label:"Chris"},{label:"John & Richard"}]}]},categories:[{category:[{start:"08/01/2014",end:"09/30/2014",label:"Q3"},{start:"10/01/2014",end:"12/31/2014",label:"Q4"},{start:"01/01/2015",end:"03/31/2015",label:"Q1"}]},{category:[{start:"08/01/2014",end:"08/31/2014",label:"Aug '14"},{start:"09/01/2014",end:"09/30/2014",label:"Sep '14"},{start:"10/01/2014",end:"10/31/2014",label:"Oct '14"},{start:"11/01/2014",end:"11/30/2014",label:"Nov '14"},{start:"12/01/2014",end:"12/31/2014",label:"Dec '14"},{start:"01/01/2015",end:"01/31/2015",label:"Jan '15"},{start:"02/01/2015",end:"02/28/2015",label:"Feb '15"},{start:"03/01/2015",end:"03/31/2015",label:"Mar '15"}]}],processes:{fontsize:"12",isbold:"1",align:"left",headerText:"Step",headerFontSize:"14",headerVAlign:"bottom",headerAlign:"left",process:[{label:"Identify Customers"},{label:"Survey 500 Customers"},{label:"Interpret Requirements"},{label:"Market Analysis"},{label:"Brainstorm concepts"},{label:"Define Ad Requirements"},{label:"Design & Develop"},{label:"Mock test"},{label:"Documentation"},{label:"Start Campaign"}]},tasks:{task:[{start:"08/04/2014",end:"08/10/2014"},{start:"08/08/2014",end:"08/19/2014"},{start:"08/19/2014",end:"09/02/2014"},{start:"08/24/2014",end:"09/02/2014"},{start:"09/02/2014",end:"09/21/2014"},{start:"09/21/2014",end:"10/06/2014"},{start:"10/06/2014",end:"01/21/2015"},{start:"01/21/2015",end:"02/19/2015"},{start:"01/28/2015",end:"02/24/2015"},{start:"02/24/2015",end:"03/27/2015"}]}}};beforeEach((function(){chartObj=(0,_utitilies.setup)(_core.default,chartData)}));afterEach((function(){if(chartObj&&!chartObj.disposed)chartObj.dispose()}));it("Change window size and set the chart dimenssions into (%) to check the Gantt chart responsive feature",(function(done){expect(chartObj).toBeDefined();var renderComplete=function renderComplete(){done()};chartObj.addEventListener("renderComplete",renderComplete);chartObj.render()}))}));describe("Multilevel Pie Chart width resize chart render",(function(){var customSquare=function customSquare(prevSum,value){return prevSum+value*value};var chartObj,chartData={type:"multilevelpie",renderAt:_utitilies.CONTAINER_ID,id:"myChart",width:"100%",height:"500",dataFormat:"json",customAggregatorData:[{aggregatorFunctionName:"customSquare",aggregatorFunction:customSquare}],dataSource:{chart:{caption:"Sales Breakup - Top Product Categories",subcaption:"Last Quarter",showPlotBorder:"1",piefillalpha:"60",pieborderthickness:"2",piebordercolor:"#FFFFFF",hoverfillcolor:"#CCCCCC",numberprefix:"$",plottooltext:"$label, $$valueK, $percentValue",theme:"fusion"},category:[{label:"Products",color:"#ffffff",value:"150",category:[{label:"Food & {br}Beverages",color:"#f8bd19",value:"55.5",tooltext:"Food & Beverages, $$valueK, $percentValue",category:[{label:"Breads",color:"#f8bd19",value:"11.1"},{label:"Juice",color:"#f8bd19",value:"27.75"},{label:"Noodles",color:"#f8bd19",value:"9.99"},{label:"Seafood",color:"#f8bd19",value:"6.66"}]},{label:"Apparel &{br}Accessories",color:"#33ccff",value:"42",tooltext:"Apparel & Accessories, $$valueK, $percentValue",category:[{label:"Sun Glasses",color:"#33ccff",value:"10.08"},{label:"Clothing",color:"#33ccff",value:"18.9"},{label:"Handbags",color:"#33ccff",value:"6.3"},{label:"Shoes",color:"#33ccff",value:"6.72"}]},{label:"Baby {br}Products",color:"#ffcccc",value:"22.5",tooltext:"Baby Products, $$valueK, $percentValue",category:[{label:"Bath &{br}Grooming",color:"#ffcccc",value:"9.45",tooltext:"Bath & Grooming, $$valueK, $percentValue"},{label:"Food",color:"#ffcccc",value:"6.3"},{label:"Diapers",color:"#ffcccc",value:"6.75"}]},{label:"Electronics",color:"#ccff66",value:"30",category:[{label:"Laptops",color:"#ccff66",value:"8.1"},{label:"Televisions",color:"#ccff66",value:"10.5"},{label:"SmartPhones",color:"#ccff66",value:"11.4"}]}]}]}};beforeEach((function(){chartObj=(0,_utitilies.setup)(_core.default,chartData)}));it("Testing custom aggregator function ",(function(done){chartObj.addEventListener("renderComplete",(function(){setTimeout((function(){expect(!!_index2.default.resolve("customSquare")).toBeTruthy();done()}),2e3)}));chartObj.render()}))}));describe("Timeseries custom aggregator function render ",(function(){var customSquare=function customSquare(prevSum,value){return prevSum+value*value};var data=[["United States","1/4/2011",1],["United States","1/5/2011",2],["United States","1/5/2011",3],["United States","1/5/2011",4],["United States","1/6/2011",5]];var fusionDataStore=new _index.default;var schema=[{name:"Country",type:"string"},{name:"Time",type:"date",format:"%-m/%-d/%Y"},{name:"Sales",type:"number"}];var fusionTable=fusionDataStore.createDataTable(data,schema);var mainConfig={type:"timeseries",renderAt:_utitilies.CONTAINER_ID,width:"90%",height:650,customAggregatorData:[{aggregatorFunctionName:"customSquare",aggregatorFunction:customSquare}],dataSource:{data:fusionTable,chart:{exportEnabled:1},caption:{text:"Online Sales of a SuperStore in India & the US"},yAxis:[{plot:{value:"Sales",type:"column",aggregation:"customSquare"}}],series:"Country"}},chartObj;beforeEach((function(){chartObj=(0,_utitilies.setup)(_core.default,mainConfig).render()}));afterEach((function(){if(chartObj&&!chartObj.disposed)chartObj.dispose()}));it("Change window size and set the chart dimenssions into (%) to check the Multilevel chart responsive feature",(function(done){expect(chartObj).toBeDefined();var renderComplete=function renderComplete(){done()};chartObj.addEventListener("renderComplete",renderComplete);chartObj.render()}))}));