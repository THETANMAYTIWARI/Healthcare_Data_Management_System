"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _core=_interopRequireDefault(require("../../../../fusioncharts/core"));var _scrollbar2d=_interopRequireDefault(require("../../chart/scrollbar2d"));var _stackedcolumn2dlinedy=_interopRequireDefault(require("../../chart/stackedcolumn2dlinedy"));var _utitilies=require("../../../../../dev-tests/viz/utitilies");_core.default.addDep(_stackedcolumn2dlinedy.default);_core.default.addDep(_scrollbar2d.default);describe("Scrollbar2d Tooltip text on Hover match test",(function(){var chartObj,chartData={type:"scrollbar2d",renderAt:_utitilies.CONTAINER_ID,width:"600",height:"500",dataFormat:"json",dataSource:{chart:{theme:"fusion",caption:"Top 25 NPM Packages for Node.js Developers",subCaption:"March 2019 ",plottooltext:"$datavalue Downloads",YAxisname:"Number of Downloads",plotSpacePercent:"50",drawCrossLine:1,XAxisname:"Packages"},categories:[{category:[{label:"Commander.js"},{label:"Async.js"},{label:"Request â€“ Simplified HTTP Client"},{label:"Express"},{label:"WebPack"},{label:"Underscore"},{label:"React"},{label:"JSDom"},{label:"Cheerio"},{label:"Mocha"},{label:"Marked"},{label:"LESS"},{label:"Morgan"},{label:"Karma"},{label:"MongoDB Node.JS Driver"},{label:"Nodemailer"},{label:"Passport"},{label:"Browserify"},{label:"Grunt"},{label:"JSHint"},{label:"Angular"},{label:"Bower"},{label:"Pug"},{label:"PM2"},{label:"Hapi"}]}],dataset:[{data:[{value:"97294205"},{value:"95482197"},{value:"60224172"},{value:"33018247"},{value:"31615028"},{value:"28984878"},{value:"25391784"},{value:"23581733"},{value:"12321215"},{value:"10838161"},{value:"7808888"},{value:"7127519"},{value:"6659395"},{value:"5731933"},{value:"4843888"},{value:"3264090"},{value:"2755188"},{value:"2661761"},{value:"2371272"},{value:"2201511"},{value:"1821149"},{value:"1683996"},{value:"1602832"},{value:"1267422"},{value:"1042206"}]}]}};beforeEach((function(){chartObj=(0,_utitilies.setup)(_core.default,chartData)}));afterEach((function(){chartObj&&!chartObj.disposed&&chartObj.dispose()}));it("Scrollbar Event to check the text of Hover tooltip",(function(done){chartObj.addEventListener("renderComplete",(function(){chartObj.drawCrossline(1);var expectedTooltipValue="95.48M Downloads",barGroup=document.querySelector('[class*="plot-group"]'),plotArea=barGroup.querySelectorAll("rect")[0],hoverEvent=new Event("mouseover");plotArea.dispatchEvent(hoverEvent);var tooltipElements=document.querySelectorAll('[class*="fc__tooltip"] ');if(tooltipElements.length>0){tooltipElements.forEach((function(element,index){var divs=element.getElementsByTagName("div")[2].innerHTML;console.log(divs);expect(divs).toBe(expectedTooltipValue)}))}else{console.warn("No elements found with class .fc__tooltip")}done()}));chartObj.render()}))}));describe("stackedcolumn2dlinedy Tooltip text on Hover match test",(function(){var chartObj,chartData={type:"stackedcolumn2dlinedy",renderAt:_utitilies.CONTAINER_ID,width:"100%",height:"500",dataFormat:"json",dataSource:{chart:{applyCssTransform:"1",showLegend:"1",legendPosition:"bottom-right",legendBorderThickness:"0",legendShadow:"0",animation:"0",drawAnchors:"1",use3DLighting:"0",showShadow:"0",lineThickness:3,showvalues:"0",bgColor:"#333333",bgAlpha:"100",showBorder:"0",borderThickness:"0",showAlternateHGridColor:"0",showAlternateVGridColor:"0",baseFontSize:12,anchorRadius:"4",showCanvasBorder:"0",canvasPadding:"0",canvasBgColor:"#333333",canvasBgRatio:"100",chartLeftMargin:"20",chartRightMargin:"20",chartTopMargin:"20",chartBottomMargin:"10",showPlotBorder:"0",usePlotGradientColor:"0",plotBorderThickness:"1",formatNumberScale:"1",sFormatNumberScale:"1",xAxisNameFontBold:"0",yAxisNameFontBold:"1",sYAxisNameFontBold:"1",formatNumber:"1",decimals:1,valueFontColor:"#ffffff",valueFontBold:"1",legendBgColor:"#333333",baseFontColor:"#f0f0f0",divLineColor:"#f0f0f0",toolTipBgColor:"#ddd",toolTipColor:"#333",paletteColors:"#e9c46a, #2a9d8f, #6c991e",numberSuffix:"",sNumberSuffix:"%",pYAxisName:"",sYAxisName:"",enableChartMouseMoveEvent:"1"},categories:[{category:[{label:"Jul 2021"},{label:"Aug 2021"},{label:"Sep 2021"},{label:"Oct 2021"},{label:"Nov 2021"},{label:"Dec 2021"},{label:"Jan 2022"},{label:"Feb 2022"},{label:"Mar 2022"}]}],dataset:[{seriesname:"Revenue",member:{object:{uniqueName:"[I_Revenue]",caption:"Revenue",hierarchyName:"KPI",levelNumber:1,index:22,metadata:{valueType:0},id:"[I_Revenue]",clientName:"I_Revenue",ancestors:[]},templateId:"FinancialRatios",count:4},measure:{object:{id:"[Amount]",name:"Amount"},count:1},valueType:0,color:"#e9c46a",showValues:"1",parentYAxis:"P",data:[{time:{uniqueName:"[2021].[3].[7]",caption:"Jul 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:7,day:1},index:42,id:"[2021].[3].[7]",clientName:"[2021].[3].[7]",ancestors:[],metadata:{valueType:1}},value:15913134,displayValue:"$15.91M",showValue:true,actualValue:15913134},{time:{uniqueName:"[2021].[3].[8]",caption:"Aug 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:8,day:1},index:43,id:"[2021].[3].[8]",clientName:"[2021].[3].[8]",ancestors:[],metadata:{valueType:1}},value:16042721,displayValue:"$16.04M",showValue:true,actualValue:16042721},{time:{uniqueName:"[2021].[3].[9]",caption:"Sep 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:9,day:1},index:44,id:"[2021].[3].[9]",clientName:"[2021].[3].[9]",ancestors:[],metadata:{valueType:1}},value:16602239,displayValue:"$16.60M",showValue:true,actualValue:16602239},{time:{uniqueName:"[2021].[4].[10]",caption:"Oct 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:10,day:1},index:46,id:"[2021].[4].[10]",clientName:"[2021].[4].[10]",ancestors:[],metadata:{valueType:1}},value:14283353,displayValue:"$14.28M",showValue:true,actualValue:14283353},{time:{uniqueName:"[2021].[4].[11]",caption:"Nov 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:11,day:1},index:47,id:"[2021].[4].[11]",clientName:"[2021].[4].[11]",ancestors:[],metadata:{valueType:1}},value:14469180,displayValue:"$14.47M",showValue:true,actualValue:14469180},{time:{uniqueName:"[2021].[4].[12]",caption:"Dec 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:12,day:1},index:48,id:"[2021].[4].[12]",clientName:"[2021].[4].[12]",ancestors:[],metadata:{valueType:1}},value:13779494,displayValue:"$13.78M",showValue:true,actualValue:13779494},{time:{uniqueName:"[2022].[1].[1]",caption:"Jan 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:1,day:1},index:51,id:"[2022].[1].[1]",clientName:"[2022].[1].[1]",ancestors:[],metadata:{valueType:1}},value:13033227,displayValue:"$13.03M",showValue:true,actualValue:13033227},{time:{uniqueName:"[2022].[1].[2]",caption:"Feb 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:2,day:1},index:52,id:"[2022].[1].[2]",clientName:"[2022].[1].[2]",ancestors:[],metadata:{valueType:1}},value:12904548,displayValue:"$12.90M",showValue:true,actualValue:12904548},{time:{uniqueName:"[2022].[1].[3]",caption:"Mar 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:3,day:1},index:53,id:"[2022].[1].[3]",clientName:"[2022].[1].[3]",ancestors:[],metadata:{valueType:1}},value:12414121,displayValue:"$12.41M",showValue:true,actualValue:12414121}]},{seriesname:"COGS",member:{object:{uniqueName:"[I_CostOfGoodSold]",caption:"COGS",hierarchyName:"KPI",levelNumber:1,index:23,metadata:{valueType:0},id:"[I_CostOfGoodSold]",clientName:"I_CostOfGoodSold",ancestors:[]},templateId:"FinancialRatios",count:4},measure:{object:{id:"[Amount]",name:"Amount"},count:1},valueType:0,color:"#2a9d8f",showValues:"1",parentYAxis:"P",data:[{time:{uniqueName:"[2021].[3].[7]",caption:"Jul 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:7,day:1},index:42,id:"[2021].[3].[7]",clientName:"[2021].[3].[7]",ancestors:[],metadata:{valueType:1}},value:-5725302,displayValue:"$5.73M",showValue:true,actualValue:-5725302},{time:{uniqueName:"[2021].[3].[8]",caption:"Aug 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:8,day:1},index:43,id:"[2021].[3].[8]",clientName:"[2021].[3].[8]",ancestors:[],metadata:{valueType:1}},value:-5584740,displayValue:"$5.58M",showValue:true,actualValue:-5584740},{time:{uniqueName:"[2021].[3].[9]",caption:"Sep 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:9,day:1},index:44,id:"[2021].[3].[9]",clientName:"[2021].[3].[9]",ancestors:[],metadata:{valueType:1}},value:-5781242,displayValue:"$5.78M",showValue:true,actualValue:-5781242},{time:{uniqueName:"[2021].[4].[10]",caption:"Oct 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:10,day:1},index:46,id:"[2021].[4].[10]",clientName:"[2021].[4].[10]",ancestors:[],metadata:{valueType:1}},value:-5204362,displayValue:"$5.20M",showValue:true,actualValue:-5204362},{time:{uniqueName:"[2021].[4].[11]",caption:"Nov 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:11,day:1},index:47,id:"[2021].[4].[11]",clientName:"[2021].[4].[11]",ancestors:[],metadata:{valueType:1}},value:-5338786,displayValue:"$5.34M",showValue:true,actualValue:-5338786},{time:{uniqueName:"[2021].[4].[12]",caption:"Dec 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:12,day:1},index:48,id:"[2021].[4].[12]",clientName:"[2021].[4].[12]",ancestors:[],metadata:{valueType:1}},value:-5094582,displayValue:"$5.09M",showValue:true,actualValue:-5094582},{time:{uniqueName:"[2022].[1].[1]",caption:"Jan 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:1,day:1},index:51,id:"[2022].[1].[1]",clientName:"[2022].[1].[1]",ancestors:[],metadata:{valueType:1}},value:-4568374,displayValue:"$4.57M",showValue:true,actualValue:-4568374},{time:{uniqueName:"[2022].[1].[2]",caption:"Feb 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:2,day:1},index:52,id:"[2022].[1].[2]",clientName:"[2022].[1].[2]",ancestors:[],metadata:{valueType:1}},value:-4629800,displayValue:"$4.63M",showValue:true,actualValue:-4629800},{time:{uniqueName:"[2022].[1].[3]",caption:"Mar 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:3,day:1},index:53,id:"[2022].[1].[3]",clientName:"[2022].[1].[3]",ancestors:[],metadata:{valueType:1}},value:-4764263,displayValue:"$4.76M",showValue:true,actualValue:-4764263}]},{seriesname:"Gross Profit",member:{object:{index:143,dependencies:["I_Revenue","I_CostOfGoodSold"],isValid:true,error:"",expression:"@[I_Revenue] - @[I_CostOfGoodSold]",uniqueName:"[I_GrossProfit]",caption:"Gross Profit",hierarchyName:"KPI",levelNumber:0,ancestors:[],clientName:"I_GrossProfit",metadata:{valueType:0}},templateId:"FinancialRatios",count:4},measure:{object:{id:"[Amount]",name:"Amount"},count:1},valueType:0,color:"#6c991e",showValues:"1",parentYAxis:"P",renderAs:"line",data:[{time:{uniqueName:"[2021].[3].[7]",caption:"Jul 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:7,day:1},index:42,id:"[2021].[3].[7]",clientName:"[2021].[3].[7]",ancestors:[],metadata:{valueType:1}},value:10187832,displayValue:"$10.19M",showValue:true,actualValue:10187832},{time:{uniqueName:"[2021].[3].[8]",caption:"Aug 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:8,day:1},index:43,id:"[2021].[3].[8]",clientName:"[2021].[3].[8]",ancestors:[],metadata:{valueType:1}},value:10457981,displayValue:"$10.46M",showValue:true,actualValue:10457981},{time:{uniqueName:"[2021].[3].[9]",caption:"Sep 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:9,day:1},index:44,id:"[2021].[3].[9]",clientName:"[2021].[3].[9]",ancestors:[],metadata:{valueType:1}},value:10820997,displayValue:"$10.82M",showValue:true,actualValue:10820997},{time:{uniqueName:"[2021].[4].[10]",caption:"Oct 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:10,day:1},index:46,id:"[2021].[4].[10]",clientName:"[2021].[4].[10]",ancestors:[],metadata:{valueType:1}},value:9078991,displayValue:"$9.08M",showValue:true,actualValue:9078991},{time:{uniqueName:"[2021].[4].[11]",caption:"Nov 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:11,day:1},index:47,id:"[2021].[4].[11]",clientName:"[2021].[4].[11]",ancestors:[],metadata:{valueType:1}},value:9130394,displayValue:"$9.13M",showValue:true,actualValue:9130394},{time:{uniqueName:"[2021].[4].[12]",caption:"Dec 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:12,day:1},index:48,id:"[2021].[4].[12]",clientName:"[2021].[4].[12]",ancestors:[],metadata:{valueType:1}},value:8684912,displayValue:"$8.68M",showValue:true,actualValue:8684912},{time:{uniqueName:"[2022].[1].[1]",caption:"Jan 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:1,day:1},index:51,id:"[2022].[1].[1]",clientName:"[2022].[1].[1]",ancestors:[],metadata:{valueType:1}},value:8464853,displayValue:"$8.46M",showValue:true,actualValue:8464853},{time:{uniqueName:"[2022].[1].[2]",caption:"Feb 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:2,day:1},index:52,id:"[2022].[1].[2]",clientName:"[2022].[1].[2]",ancestors:[],metadata:{valueType:1}},value:8274748,displayValue:"$8.27M",showValue:true,actualValue:8274748},{time:{uniqueName:"[2022].[1].[3]",caption:"Mar 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:3,day:1},index:53,id:"[2022].[1].[3]",clientName:"[2022].[1].[3]",ancestors:[],metadata:{valueType:1}},value:7649858,displayValue:"$7.65M",showValue:true,actualValue:7649858}]},{seriesname:"Gross Profit Margin",member:{object:{index:144,dependencies:["I_GrossProfit","I_Revenue"],isValid:true,error:"",expression:"@[I_GrossProfit] /@[I_Revenue]",uniqueName:"[I_GrossProfitMargin]",caption:"Gross Profit Margin",hierarchyName:"KPI",levelNumber:0,ancestors:[],clientName:"I_GrossProfitMargin",metadata:{valueType:3}},templateId:"FinancialRatios",count:4},measure:{object:{id:"[Amount]",name:"Amount"},count:1},valueType:3,color:"#e9c46a",showValues:"1",parentYAxis:"S",renderAs:"line",valueBgColor:"#888888",valueBorderColor:"#ffffff",data:[{time:{uniqueName:"[2021].[3].[7]",caption:"Jul 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:7,day:1},index:42,id:"[2021].[3].[7]",clientName:"[2021].[3].[7]",ancestors:[],metadata:{valueType:1}},value:64.02153089391443,displayValue:"64.02%",showValue:true,actualValue:.6402153089391442},{time:{uniqueName:"[2021].[3].[8]",caption:"Aug 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:8,day:1},index:43,id:"[2021].[3].[8]",clientName:"[2021].[3].[8]",ancestors:[],metadata:{valueType:1}},value:65.18832434971598,displayValue:"65.19%",showValue:true,actualValue:.6518832434971599},{time:{uniqueName:"[2021].[3].[9]",caption:"Sep 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:3,month:9,day:1},index:44,id:"[2021].[3].[9]",clientName:"[2021].[3].[9]",ancestors:[],metadata:{valueType:1}},value:65.17793774683042,displayValue:"65.18%",showValue:true,actualValue:.6517793774683042},{time:{uniqueName:"[2021].[4].[10]",caption:"Oct 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:10,day:1},index:46,id:"[2021].[4].[10]",clientName:"[2021].[4].[10]",ancestors:[],metadata:{valueType:1}},value:63.56344340155985,displayValue:"63.56%",showValue:true,actualValue:.6356344340155985},{time:{uniqueName:"[2021].[4].[11]",caption:"Nov 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:11,day:1},index:47,id:"[2021].[4].[11]",clientName:"[2021].[4].[11]",ancestors:[],metadata:{valueType:1}},value:63.10235963613695,displayValue:"63.1%",showValue:true,actualValue:.6310235963613695},{time:{uniqueName:"[2021].[4].[12]",caption:"Dec 2021",hierarchyName:"Date",levelNumber:3,properties:{year:2021,quarter:4,month:12,day:1},index:48,id:"[2021].[4].[12]",clientName:"[2021].[4].[12]",ancestors:[],metadata:{valueType:1}},value:63.02780058542062,displayValue:"63.03%",showValue:true,actualValue:.6302780058542062},{time:{uniqueName:"[2022].[1].[1]",caption:"Jan 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:1,day:1},index:51,id:"[2022].[1].[1]",clientName:"[2022].[1].[1]",ancestors:[],metadata:{valueType:1}},value:64.94825111233004,displayValue:"64.95%",showValue:true,actualValue:.6494825111233005},{time:{uniqueName:"[2022].[1].[2]",caption:"Feb 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:2,day:1},index:52,id:"[2022].[1].[2]",clientName:"[2022].[1].[2]",ancestors:[],metadata:{valueType:1}},value:64.12272634423151,displayValue:"64.12%",showValue:true,actualValue:.6412272634423151},{time:{uniqueName:"[2022].[1].[3]",caption:"Mar 2022",hierarchyName:"Date",levelNumber:3,properties:{year:2022,quarter:1,month:3,day:1},index:53,id:"[2022].[1].[3]",clientName:"[2022].[1].[3]",ancestors:[],metadata:{valueType:1}},value:61.622228428416314,displayValue:"61.62%",showValue:true,actualValue:.6162222842841631}]}]}};beforeEach((function(){chartObj=(0,_utitilies.setup)(_core.default,chartData)}));afterEach((function(){chartObj&&!chartObj.disposed&&chartObj.dispose()}));it("stackedcolumn2dlinedy Event to check the text of Hover tooltip",(function(done){chartObj.addEventListener("renderComplete",(function(){var expectedScrollPosition=200,viewDiv,_viewDiv,scaleBoxDiv,containerDiv,styleTag;viewDiv=document.createElement("div");viewDiv.classList.add("view");scaleBoxDiv=document.createElement("div");scaleBoxDiv.classList.add("scale-box");containerDiv=document.getElementById(_utitilies.CONTAINER_ID);scaleBoxDiv.insertAdjacentElement("afterbegin",containerDiv);viewDiv.insertAdjacentElement("afterbegin",scaleBoxDiv);document.body.insertAdjacentElement("afterbegin",viewDiv);styleTag=document.createElement("style");styleTag.textContent="\n          html, body {\n            margin: 0;\n            padding: 0;\n            height: 100%;\n            color: #333;\n            overflow: hidden;\n            cursor: default;\n            user-select: none;\n          }\n\n          .view {\n            width: 100%;\n            height: 100%;\n            position: relative;\n            overflow-y: auto;\n            overflow-x: hidden;\n            font-size: 1.2em;\n          }\n\n          .scale-box {\n            position: absolute;\n            height: 2500px;\n            width: 100%;\n            transform-origin: left top;\n            transform: scale(1.2, 1.1);\n          }\n\n          .block {\n            display: flex;\n            position: absolute;\n            justify-content: center;\n            align-items: center;\n            line-height: normal;\n            z-index: 100;\n            top: 500px;\n            left: 200px;\n            width: 600px;\n            height: 600px;\n          }\n\n          .content {\n            width: calc(100% - 1em);\n            height: calc(100% - 1em);\n          }\n        ";document.head.insertAdjacentElement("afterbegin",styleTag);_viewDiv=document.querySelector(".view");if(_viewDiv){_viewDiv.scrollTop+=expectedScrollPosition}setTimeout((function(){expect(viewDiv.scrollTop).toBe(expectedScrollPosition);done()}),2e3)}));chartObj.render()}))}));